---

- name: update repositories cache and install dependencies
  apt:
    name: "{{ item }}"
  with_items:
    - python-pip
    - libgmp-dev

- name: upgrade pip
  pip:
    name: pip
    state: latest

- name: install xortool
  pip:
    name: "{{ item }}"
  with_items:
    - gmpy
    - pyasn1
    - git+https://github.com/ius/rsatool

- name: put the contents of distrib into the home directory
  copy:
    src: "distrib/"
    dest: "{{ homedir }}/"
    owner: "root"
    group: "{{ level }}"
    mode: 0440
